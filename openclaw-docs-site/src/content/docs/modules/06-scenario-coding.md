---
title: 场景二：远程代码编写
description: 通过聊天软件远程操作电脑完成代码修改、测试与提交，适合离开工位时处理紧急任务
---

# 场景二：远程代码编写

通过 Discord 或飞书，你可以在手机上远程让 OpenClaw 完成“读代码 -> 改代码 -> 跑测试 -> 提交”的闭环。

---

## 本章产出

完成本章后，你应该已经：

- 建立可控的远程 Coding 工作流
- 能让 AI 在受限目录内完成常见开发任务
- 采用“先预览再执行”的安全流程，避免误改和误推送

---

## 前置条件

- 已完成 [安装与部署](./01-installation.md)
- 已完成 [聊天平台配置](./03-channel-config.md)
- 已阅读 [核心原则：查阅 Docs](./04-core-principles.md)

---

## 适合与不适合的任务

| ✅ 适合 | ❌ 不适合 |
|--------|----------|
| 小范围 Bug 修复 | 依赖复杂 GUI 交互的调试 |
| 添加函数或脚本 | 大规模架构重构 |
| 运行测试与日志排查 | 需要高实时图形反馈的工作 |
| 文档生成与整理 | 需要大量人工代码评审的改造 |

---

## 安全基线（强烈建议先设置）

### 对 AI 说的话

```text
请将操作范围限制为 ~/projects/，不要访问其他目录。
```

```text
涉及修改文件时先给我计划和 diff，等我确认后再写入。
```

```text
涉及 git push、删除文件、覆盖配置时，必须二次确认。
```

```text
默认不要直接 push 到生产主分支（main/master）；先提交到修复分支，确认后再合并。
```

---

## 基本远程操作模板

### 1) 查看文件

```text
请读取 ~/projects/myapp/src/main.py，并说明这个文件的核心职责。
```

### 2) 修改代码

```text
请在 ~/projects/myapp/src/utils.py 增加函数 dedupe_and_sort：
- 输入：列表
- 输出：去重后升序列表
先给我修改计划和 diff，确认后再写入。
```

### 3) 运行测试

```text
请在 ~/projects/myapp 运行 pytest，并给出失败用例与关键报错。
```

### 4) Git 状态检查

```text
请在 ~/projects/myapp 执行 git status 和 git diff --stat，并总结本次改动范围。
```

---

## 标准修复流程（推荐）

这是最稳妥的远程修复流程，建议固定使用：

1. 描述问题与范围（目录、分支、目标文件）
2. 让 AI 给“修复计划 + 预期影响”
3. 让 AI 给 diff（不直接提交）
4. 你确认后再应用改动
5. 运行测试并查看结果
6. 你确认后才允许 commit / push

### 对 AI 说的话（可直接复用）

```text
~/projects/api 出现报错，请按以下流程处理：
1) 先查看最近 50 行日志并定位原因
2) 给出修复计划
3) 先展示 diff，不要直接提交
4) 我确认后再应用改动并运行测试
5) 测试通过后再询问我是否允许 commit 和 push
```

---

## 实战案例：远程整理 Obsidian 笔记

```text
请帮我：
1) 读取链接 https://example.com/article
2) 生成 200 字内中文摘要
3) 保存到 ~/Obsidian/收藏/
4) 文件名格式：YYYY-MM-DD-标题.md
5) 文件开头添加标签：#收藏 #待读
先预览文件内容，确认后再写入。
```

---

## 验证清单

- [ ] AI 仅在指定目录内操作
- [ ] 修改前会先给计划与 diff
- [ ] 测试结果可复述关键失败原因
- [ ] commit / push 前有明确确认

---

## 失败排查示例：修复后测试仍失败

建议排查顺序：

1. 先让 AI 给出失败用例与第一条报错栈。
2. 判断是“修复不完整”还是“引入新回归”。
3. 让 AI 只做最小修补并再次给 diff。
4. 仅在测试通过后再考虑 commit / push。

可直接对 AI 说：

```text
当前修复后测试仍失败。
请先列出失败用例和首个报错，再给最小修补方案和 diff。
不要提交，也不要 push，等我确认后再执行。
```

---

## 下一步

- [配置管理与维护](./08-config-management.md)
- [常见问题](./09-faq.md)
